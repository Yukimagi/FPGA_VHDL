module mealy11001(clk,rst,inp,outp);
input clk,rst,inp;
output reg outp;
reg [1:0]state;
parameter S0=0, S1=1, S2=2, S3=3,s4=4;

always @(posedge clk or posedge rst)
	if(rst)
		state<=S0;
	else
		case(state)

			S0: if(inp)
				state<=S1;
			else
				state<=S0;
			S1: if(inp)
				state<=S2;
			else
				state<=S0;
			S2: if(~inp)
				state<=S3;
			else
				state<=S2;
			S3: if(~inp)
				state<=S4;
			else
				state<=S1;
			S4: if(inp)
				state<=S1
			else
				state<=S0;
		endcase
//
always @(state,inp)

	case(state)
		S0: if(inp)
			outp<=0;
		else
			outp<=0;
		S1: if(inp)
			outp<=0;
		else
			outp<=0;
		S2: if(inp)
			outp<=0;
		else
			outp<=0;
		S3: if(inp)
			outp<=0;
		else
			outp<=0;
		S4: if(inp)
			outp<=1;
		else
			outp<=0;
endcase
endmodule
